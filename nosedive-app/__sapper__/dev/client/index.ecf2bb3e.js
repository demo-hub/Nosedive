import { S as SvelteComponentDev, i as init, d as dispatch_dev, s as safe_not_equal, a as stores$1, v as validate_store, c as component_subscribe, b as validate_slots, g as goto, e as element, t as text, f as claim_element, h as children, j as claim_text, k as detach_dev, l as add_location, m as insert_dev, n as append_dev, o as set_data_dev, p as space, q as empty, r as query_selector_all, u as claim_space, w as attr_dev, x as set_input_value, y as listen_dev, z as prevent_default, A as noop, B as run_all, C as set_store_value } from './client.9b2e715d.js';

/* src\routes\index.svelte generated by Svelte v3.24.0 */
const file = "src\\routes\\index.svelte";

// (97:2) {#if error}
function create_if_block(ctx) {
	let p;
	let t;

	const block = {
		c: function create() {
			p = element("p");
			t = text(/*error*/ ctx[2]);
			this.h();
		},
		l: function claim(nodes) {
			p = claim_element(nodes, "P", {});
			var p_nodes = children(p);
			t = claim_text(p_nodes, /*error*/ ctx[2]);
			p_nodes.forEach(detach_dev);
			this.h();
		},
		h: function hydrate() {
			add_location(p, file, 97, 2, 2009);
		},
		m: function mount(target, anchor) {
			insert_dev(target, p, anchor);
			append_dev(p, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*error*/ 4) set_data_dev(t, /*error*/ ctx[2]);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(p);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block.name,
		type: "if",
		source: "(97:2) {#if error}",
		ctx
	});

	return block;
}

function create_fragment(ctx) {
	let link0;
	let link1;
	let link2;
	let t0;
	let h1;
	let t1;
	let t2;
	let button0;
	let i;
	let t3;
	let t4;
	let br;
	let t5;
	let form;
	let label0;
	let t6;
	let input0;
	let t7;
	let label1;
	let t8;
	let input1;
	let t9;
	let button1;
	let t10;
	let t11;
	let if_block_anchor;
	let mounted;
	let dispose;
	let if_block = /*error*/ ctx[2] && create_if_block(ctx);

	const block = {
		c: function create() {
			link0 = element("link");
			link1 = element("link");
			link2 = element("link");
			t0 = space();
			h1 = element("h1");
			t1 = text("N O S E D I V E");
			t2 = space();
			button0 = element("button");
			i = element("i");
			t3 = text(" Sign in with Twitter");
			t4 = space();
			br = element("br");
			t5 = space();
			form = element("form");
			label0 = element("label");
			t6 = text("Username:\n\t  ");
			input0 = element("input");
			t7 = space();
			label1 = element("label");
			t8 = text("Password:\n\t  ");
			input1 = element("input");
			t9 = space();
			button1 = element("button");
			t10 = text("Login");
			t11 = space();
			if (if_block) if_block.c();
			if_block_anchor = empty();
			this.h();
		},
		l: function claim(nodes) {
			const head_nodes = query_selector_all("[data-svelte=\"svelte-148dxdq\"]", document.head);
			link0 = claim_element(head_nodes, "LINK", { rel: true, href: true });
			link1 = claim_element(head_nodes, "LINK", { rel: true, href: true });
			link2 = claim_element(head_nodes, "LINK", { href: true, rel: true });
			head_nodes.forEach(detach_dev);
			t0 = claim_space(nodes);
			h1 = claim_element(nodes, "H1", { class: true });
			var h1_nodes = children(h1);
			t1 = claim_text(h1_nodes, "N O S E D I V E");
			h1_nodes.forEach(detach_dev);
			t2 = claim_space(nodes);
			button0 = claim_element(nodes, "BUTTON", { id: true, class: true });
			var button0_nodes = children(button0);
			i = claim_element(button0_nodes, "I", { class: true });
			children(i).forEach(detach_dev);
			t3 = claim_text(button0_nodes, " Sign in with Twitter");
			button0_nodes.forEach(detach_dev);
			t4 = claim_space(nodes);
			br = claim_element(nodes, "BR", {});
			t5 = claim_space(nodes);
			form = claim_element(nodes, "FORM", { method: true });
			var form_nodes = children(form);
			label0 = claim_element(form_nodes, "LABEL", {});
			var label0_nodes = children(label0);
			t6 = claim_text(label0_nodes, "Username:\n\t  ");
			input0 = claim_element(label0_nodes, "INPUT", { type: true });
			label0_nodes.forEach(detach_dev);
			t7 = claim_space(form_nodes);
			label1 = claim_element(form_nodes, "LABEL", {});
			var label1_nodes = children(label1);
			t8 = claim_text(label1_nodes, "Password:\n\t  ");
			input1 = claim_element(label1_nodes, "INPUT", { type: true });
			label1_nodes.forEach(detach_dev);
			t9 = claim_space(form_nodes);
			button1 = claim_element(form_nodes, "BUTTON", { type: true });
			var button1_nodes = children(button1);
			t10 = claim_text(button1_nodes, "Login");
			button1_nodes.forEach(detach_dev);
			form_nodes.forEach(detach_dev);
			t11 = claim_space(nodes);
			if (if_block) if_block.l(nodes);
			if_block_anchor = empty();
			this.h();
		},
		h: function hydrate() {
			attr_dev(link0, "rel", "stylesheet");
			attr_dev(link0, "href", "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css");
			add_location(link0, file, 70, 1, 1161);
			attr_dev(link1, "rel", "stylesheet");
			attr_dev(link1, "href", "https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/5.1.1/bootstrap-social.min.css.map");
			add_location(link1, file, 71, 1, 1266);
			attr_dev(link2, "href", "//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css");
			attr_dev(link2, "rel", "stylesheet");
			add_location(link2, file, 72, 1, 1389);
			document.title = "Nosedive";
			attr_dev(h1, "class", "svelte-gyhody");
			add_location(h1, file, 76, 0, 1527);
			attr_dev(i, "class", "fa fa-twitter svelte-gyhody");
			add_location(i, file, 79, 1, 1648);
			attr_dev(button0, "id", "twitter-button");
			attr_dev(button0, "class", "btn btn-block btn-social btn-twitter svelte-gyhody");
			add_location(button0, file, 78, 0, 1553);
			add_location(br, file, 82, 0, 1710);
			attr_dev(input0, "type", "text");
			add_location(input0, file, 87, 3, 1803);
			add_location(label0, file, 85, 1, 1779);
			attr_dev(input1, "type", "password");
			add_location(input1, file, 91, 3, 1884);
			add_location(label1, file, 89, 1, 1860);
			attr_dev(button1, "type", "submit");
			add_location(button1, file, 93, 1, 1945);
			attr_dev(form, "method", "post");
			add_location(form, file, 84, 0, 1716);
		},
		m: function mount(target, anchor) {
			append_dev(document.head, link0);
			append_dev(document.head, link1);
			append_dev(document.head, link2);
			insert_dev(target, t0, anchor);
			insert_dev(target, h1, anchor);
			append_dev(h1, t1);
			insert_dev(target, t2, anchor);
			insert_dev(target, button0, anchor);
			append_dev(button0, i);
			append_dev(button0, t3);
			insert_dev(target, t4, anchor);
			insert_dev(target, br, anchor);
			insert_dev(target, t5, anchor);
			insert_dev(target, form, anchor);
			append_dev(form, label0);
			append_dev(label0, t6);
			append_dev(label0, input0);
			set_input_value(input0, /*username*/ ctx[1]);
			append_dev(form, t7);
			append_dev(form, label1);
			append_dev(label1, t8);
			append_dev(label1, input1);
			set_input_value(input1, /*password*/ ctx[0]);
			append_dev(form, t9);
			append_dev(form, button1);
			append_dev(button1, t10);
			insert_dev(target, t11, anchor);
			if (if_block) if_block.m(target, anchor);
			insert_dev(target, if_block_anchor, anchor);

			if (!mounted) {
				dispose = [
					listen_dev(button0, "click", /*signIn*/ ctx[4], false, false, false),
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[6]),
					listen_dev(input1, "input", /*input1_input_handler*/ ctx[7]),
					listen_dev(form, "submit", prevent_default(/*handleLogin*/ ctx[5]), false, true, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*username*/ 2 && input0.value !== /*username*/ ctx[1]) {
				set_input_value(input0, /*username*/ ctx[1]);
			}

			if (dirty & /*password*/ 1 && input1.value !== /*password*/ ctx[0]) {
				set_input_value(input1, /*password*/ ctx[0]);
			}

			if (/*error*/ ctx[2]) {
				if (if_block) {
					if_block.p(ctx, dirty);
				} else {
					if_block = create_if_block(ctx);
					if_block.c();
					if_block.m(if_block_anchor.parentNode, if_block_anchor);
				}
			} else if (if_block) {
				if_block.d(1);
				if_block = null;
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			detach_dev(link0);
			detach_dev(link1);
			detach_dev(link2);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(h1);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(button0);
			if (detaching) detach_dev(t4);
			if (detaching) detach_dev(br);
			if (detaching) detach_dev(t5);
			if (detaching) detach_dev(form);
			if (detaching) detach_dev(t11);
			if (if_block) if_block.d(detaching);
			if (detaching) detach_dev(if_block_anchor);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance($$self, $$props, $$invalidate) {
	let $session;
	const { session } = stores$1();
	validate_store(session, "session");
	component_subscribe($$self, session, value => $$invalidate(8, $session = value));
	let password = "";
	let username = "";
	let error;

	const signIn = async () => {
		await fetch("/twitterLogin", {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
				"Accept": "application/json"
			}
		});
	};

	const handleLogin = async () => {
		const response = await fetch("/login", {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
				Accept: "application/json"
			},
			body: JSON.stringify({ username, password })
		});

		const parsed = await response.json();

		if (!parsed.token) {
			$$invalidate(2, error = parsed.error);
		} else {
			set_store_value(session, $session.token = parsed.token, $session);
			goto("/movies");
		}
	};

	const writable_props = [];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== "$$") console.warn(`<Routes> was created with unknown prop '${key}'`);
	});

	let { $$slots = {}, $$scope } = $$props;
	validate_slots("Routes", $$slots, []);

	function input0_input_handler() {
		username = this.value;
		$$invalidate(1, username);
	}

	function input1_input_handler() {
		password = this.value;
		$$invalidate(0, password);
	}

	$$self.$capture_state = () => ({
		goto,
		stores: stores$1,
		session,
		password,
		username,
		error,
		signIn,
		handleLogin,
		$session
	});

	$$self.$inject_state = $$props => {
		if ("password" in $$props) $$invalidate(0, password = $$props.password);
		if ("username" in $$props) $$invalidate(1, username = $$props.username);
		if ("error" in $$props) $$invalidate(2, error = $$props.error);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		password,
		username,
		error,
		session,
		signIn,
		handleLogin,
		input0_input_handler,
		input1_input_handler
	];
}

class Routes extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance, create_fragment, safe_not_equal, {});

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Routes",
			options,
			id: create_fragment.name
		});
	}
}

export default Routes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZWNmMmJiM2UuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvaW5kZXguc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzdHlsZT5cblx0aDEge1xuXHRcdHRleHQtYWxpZ246IGNlbnRlcjtcblx0XHRtYXJnaW46IDAgYXV0bztcblx0XHRjb2xvcjogcmdiKDI1NSw2MiwwKTtcblx0fVxuXG5cdGgxIHtcblx0XHRmb250LXNpemU6IDIuOGVtO1xuXHRcdHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG5cdFx0Zm9udC13ZWlnaHQ6IDcwMDtcblx0XHRtYXJnaW46IDAgMCAwLjVlbSAwO1xuXHR9XG5cblx0LmZhLXR3aXR0ZXIge1xuXHRcdGNvbG9yOiB3aGl0ZTtcblx0fVxuXG5cdCN0d2l0dGVyLWJ1dHRvbiB7XG5cdFx0YmFja2dyb3VuZC1jb2xvcjogIzFEQTFGMjtcblx0XHRjb2xvcjogd2hpdGU7XG5cdH1cblxuXHRAbWVkaWEgKG1pbi13aWR0aDogNDgwcHgpIHtcblx0XHRoMSB7XG5cdFx0XHRmb250LXNpemU6IDRlbTtcblx0XHR9XG5cdH1cbjwvc3R5bGU+XG5cbjxzY3JpcHQ+XG5cdGltcG9ydCB7IGdvdG8sIHN0b3JlcyB9IGZyb20gXCJAc2FwcGVyL2FwcFwiO1xuICBcdGNvbnN0IHsgc2Vzc2lvbiB9ID0gc3RvcmVzKCk7XG5cblx0bGV0IHBhc3N3b3JkID0gXCJcIjtcblx0bGV0IHVzZXJuYW1lID0gXCJcIjtcblx0bGV0IGVycm9yO1xuXG5cdGNvbnN0IHNpZ25JbiA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCBmZXRjaCgnL3R3aXR0ZXJMb2dpbicsIHtcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXHRcdFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvbG9naW5cIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZSwgcGFzc3dvcmQgfSksXG4gICAgfSk7XG5cblx0Y29uc3QgcGFyc2VkID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFwYXJzZWQudG9rZW4pIHtcbiAgICAgIGVycm9yID0gcGFyc2VkLmVycm9yO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2Vzc2lvbi50b2tlbiA9IHBhcnNlZC50b2tlbjtcbiAgICAgIGdvdG8oXCIvbW92aWVzXCIpO1xuICAgIH1cbiAgfTtcbjwvc2NyaXB0PlxuXG48c3ZlbHRlOmhlYWQ+XG5cdDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiaHR0cHM6Ly9zdGFja3BhdGguYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvNC4zLjEvY3NzL2Jvb3RzdHJhcC5taW4uY3NzXCI+XG5cdDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYm9vdHN0cmFwLXNvY2lhbC81LjEuMS9ib290c3RyYXAtc29jaWFsLm1pbi5jc3MubWFwXCI+XG5cdDxsaW5rIGhyZWY9XCIvL25ldGRuYS5ib290c3RyYXBjZG4uY29tL2ZvbnQtYXdlc29tZS8zLjIuMS9jc3MvZm9udC1hd2Vzb21lLmNzc1wiIHJlbD1cInN0eWxlc2hlZXRcIj5cblx0PHRpdGxlPk5vc2VkaXZlPC90aXRsZT5cbjwvc3ZlbHRlOmhlYWQ+XG5cbjxoMT5OIE8gUyBFIEQgSSBWIEU8L2gxPlxuXG48YnV0dG9uIGlkPVwidHdpdHRlci1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tYmxvY2sgYnRuLXNvY2lhbCBidG4tdHdpdHRlclwiIG9uOmNsaWNrPVwie3NpZ25Jbn1cIj5cblx0PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPiBTaWduIGluIHdpdGggVHdpdHRlclxuPC9idXR0b24+XG5cbjxicj5cblxuPGZvcm0gb246c3VibWl0fHByZXZlbnREZWZhdWx0PVwie2hhbmRsZUxvZ2lufVwiIG1ldGhvZD1cInBvc3RcIj5cblx0PGxhYmVsPlxuXHQgIFVzZXJuYW1lOlxuXHQgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGJpbmQ6dmFsdWU9XCJ7dXNlcm5hbWV9XCIgLz5cblx0PC9sYWJlbD5cblx0PGxhYmVsPlxuXHQgIFBhc3N3b3JkOlxuXHQgIDxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBiaW5kOnZhbHVlPVwie3Bhc3N3b3JkfVwiIC8+XG5cdDwvbGFiZWw+XG5cdDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPkxvZ2luPC9idXR0b24+XG4gIDwvZm9ybT5cblxuICB7I2lmIGVycm9yfVxuICA8cD57ZXJyb3J9PC9wPlxuICB7L2lmfVxuIl0sIm5hbWVzIjpbInN0b3JlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztzQkFpR00sR0FBSzs7Ozs7O3FDQUFMLEdBQUs7Ozs7Ozs7Ozs7OztzREFBTCxHQUFLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFESixHQUFLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d0NBVHVCLEdBQVE7Ozs7O3dDQUlKLEdBQVE7Ozs7Ozs7Ozs7NkNBYnFDLEdBQU07OztnRUFNekQsR0FBVzs7Ozs7OzsrREFHVCxHQUFRO3lDQUFSLEdBQVE7OzsrREFJSixHQUFRO3lDQUFSLEdBQVE7OztpQkFLeEMsR0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1NBaEVELE9BQU8sS0FBS0EsUUFBTTs7O0tBRXhCLFFBQVEsR0FBRyxFQUFFO0tBQ2IsUUFBUSxHQUFHLEVBQUU7S0FDYixLQUFLOztPQUVILE1BQU07UUFDTCxLQUFLLENBQUMsZUFBZTtHQUMxQixNQUFNLEVBQUUsTUFBTTtHQUNkLE9BQU87SUFDTixjQUFjLEVBQUUsa0JBQWtCO0lBQzVCLFFBQVEsRUFBRSxrQkFBa0I7Ozs7O09BSy9CLFdBQVc7UUFDUixRQUFRLFNBQVMsS0FBSyxDQUFDLFFBQVE7R0FDbkMsTUFBTSxFQUFFLE1BQU07R0FDZCxPQUFPO0lBQ0wsY0FBYyxFQUFFLGtCQUFrQjtJQUNsQyxNQUFNLEVBQUUsa0JBQWtCOztHQUU1QixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLEVBQUUsUUFBUTs7O1FBR3hDLE1BQU0sU0FBUyxRQUFRLENBQUMsSUFBSTs7T0FFMUIsTUFBTSxDQUFDLEtBQUs7bUJBQ2YsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLOzs0QkFFcEIsUUFBUSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSztHQUM3QixJQUFJLENBQUMsU0FBUzs7Ozs7Ozs7Ozs7Ozs7RUF1QmUsUUFBUTs7Ozs7RUFJSixRQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7In0=
